<%
IMPORT FILE "common_gch.gch";
IMPORT FILE "wlan_timer_gch.gch";
IMPORT FILE "wlan_config_gch.gch";
create_form_start("fSubmit", "");
createBasicHidden();
var FP_ACTION = request("IF_ACTION");
var FP_ERRORSTR = "SUCC";
var TP_OBJNAME      = "OBJ_TIMEPOLICY_ID";
var TP_PARANUM      = 3;
var TP_IDENTITY     = "";
var TP_ACTION       = FP_ACTION;
var TP_HANDLE;
var TP_INSTNUM;
var TP_PARA[3] =
{
"RelTime1",
"RelTime2",
"ExePolicy"
};
if (TP_ACTION == "apply")
{
TP_INSTNUM = query_list(TP_OBJNAME, "WLAN");
for (var i=0; i<TP_INSTNUM; i++)
{
TP_IDENTITY = query_identity(i);
TP_HANDLE = create_paralist();
for (var j=0; j<TP_PARANUM; j++)
{
set_multiinst_para(TP_HANDLE, TP_PARA[j], i);
}
TP_IDENTITY = set_inst(TP_HANDLE, TP_OBJNAME, TP_IDENTITY);
}
}
TP_INSTNUM = query_list(TP_OBJNAME, "WLAN");
for (var i=0; i<TP_INSTNUM; i++)
{
var TP_HANDLE = create_paralist();
TP_IDENTITY   = query_identity(i);
get_inst(TP_HANDLE, TP_OBJNAME, TP_IDENTITY);
create_hidden_multiinstpara(TP_HANDLE, TP_PARA, i, TP_PARANUM);
destroy_paralist(TP_HANDLE);
}
create_hidden_sep("TP_INSTNUM", TP_INSTNUM);

FP_ERRORSTR = getDisplayInstError(FP_ERRORSTR);
var FP_CONFIGTAG = "N";
FP_ACTION = "";
query_list("OBJ_WLANCONFIG_ID", "IGD");
var FP_VIEWID = query_identity(0);
FP_ERRORSTR = timer_func(FP_ACTION, FP_ERRORSTR);
FP_ERRORSTR = config_func(FP_ACTION, FP_CONFIGTAG, FP_VIEWID, FP_ERRORSTR);
create_form_end();
%>