<%
IMPORT FILE "common_gch.gch";
function ftpuser_func(FP_ACTION, FP_INDEX, FP_ERRORSTR)
{
var FP_OBJNAME      = "OBJ_FMFTPUSER_ID";
var FP_MULTIDISPLAY = 0;
var FP_PARANUM      = 2;
var FP_IDENTITY     = "";
var PARA[2] =
{
"Username",
"Password"
};
var MASK_PARA[2] =
{
NULL,
"******"
};
FP_INDEX = ifIndexNULL("old", FP_INDEX);
create_hidden_newpara(PARA, FP_PARANUM);
var FP_INSTNUM = query_list(FP_OBJNAME, "IGD");
if (FP_INSTNUM != 888 && FP_INSTNUM >0 && FP_INDEX >=0 && FP_ACTION != "new")
{
FP_IDENTITY = query_identity(FP_INDEX);
}

FP_ERRORSTR = applyOrNewOrDelInst(FP_OBJNAME, FP_ACTION, FP_IDENTITY, PARA, FP_PARANUM, FP_ERRORSTR);

if (FP_MULTIDISPLAY == 0)
{
var FP_HANDLE = create_paralist();
get_inst(FP_HANDLE, FP_OBJNAME, FP_IDENTITY);

var passwd = get_para(FP_HANDLE, "Password");
set_para(FP_HANDLE, "Password", strencode(passwd));
filter_cover_hidden(FP_HANDLE, PARA, MASK_PARA, FP_PARANUM);
destroy_paralist(FP_HANDLE);
}
return getDisplayInstError(FP_ERRORSTR);
}
%>
