
<script language="javascript">
var TR069_PARA = new Array(
"URL",
"UserName",
"UserPassword",
"PeriodicInformEnable",
"PeriodicInformInterval",
"ParameterKey",
"ConnectionRequestURL",
"ConnectionRequestUsername",
"ConnectionRequestPassword",
"UpgradesManaged",
"DefaultWan",
"SupportCertAuth",
"ConnectionRequestPort",
"CertID",
"CertList"
);
function isParaNeedSet(trid)
{
if ( null == getObj(trid) )
{
return false;
}
if ( false == getDisplay(trid) )
{
return false;
}
return true;
}
function pageLoad(url)
{
getObj("fSubmit").action = url;
var errstr= getValue("IF_ERRORSTR");
var errpara = getValue("IF_ERRORPARAM");
OldProcessRet(errstr, errpara);
moveErrLayer(580,180);
pageGetValue();
}
function getmsg(id)
{
var str      = new Array();
str[0]   = new Array(101, "&?error_101;");
str[1]   = new Array(102, "&?error_102;");
str[2]   = new Array(103, "&?error_103;");
str[3]   = new Array(105, "&?error_105;");
str[4]   = new Array(115, "&?error_115;");
str[5]   = new Array(116, "&?error_116;");
str[6]   = new Array(117, "&?error_117;");
str[7]   = new Array(118, "&?error_118;");
str[8]   = new Array(119, "&?error_119;");
str[9]   = new Array(122, "&?error_122;");
str[10]  = new Array(143, "&?error_143;");
str[11]  = new Array(144, "&?error_144;");
str[12]  = new Array(114, "&?error_114;");
str[13]  = new Array(100, "&?error_100;");
return getMsgFormArray(str, arguments);
}
function pageGetValue()
{
if ( true == isParaNeedSet("TR_DefaultWan") )
{
var obj = getObj("Frm_DefaultWan");
var pwdStr = "";
jslDoShowComboBox("Frm_DefaultWan", "DefaultWan");
if(-1 == obj.selectedIndex)
{
setSelOtherValue(obj, "", null);
obj.selectedIndex = 0;
}
}
jslSetValue("Frm_URL", "URL");
jslSetValue("Frm_UserName", "UserName");
jslSetValue("Frm_UserPassword", "UserPassword", "GET");
jslSetValue("Frm_ConnectionRequestURL", "ConnectionRequestURL");
jslSetValue("Frm_ConnectionRequestUsername", "ConnectionRequestUsername");
jslSetValue("Frm_ConnectionRequestPassword", "ConnectionRequestPassword", "GET");
if ( true == isParaNeedSet("TR_ConnectionRequestPort") )
{
jslSetValue("Frm_ConnectionRequestPort", "ConnectionRequestPort");
}
jslPostToViewCheckBox("Frm_PeriodicInformEnable", "PeriodicInformEnable");
jslPostToViewCheckBox("Frm_SupportCertAuth", "SupportCertAuth");
if(true == getChecked("Frm_PeriodicInformEnable"))
{
jslEnable("Frm_PeriodicInformInterval");
}
else
{
jslDisable("Frm_PeriodicInformInterval");
}
jslSetValue("Frm_PeriodicInformInterval", "PeriodicInformInterval");
var CertList = getValue("CertList");
if ( "" != CertList )
{
CertList = CertList.split(";");
var certChainIndex = 0;
for ( var i=0; i<CertList.length; i++ )
{
var CertName = CertList[i];
if ( CertList[i] == "Auto" )
{
CertName = "&?wan022;";
}
else
{
CertName = "&?trbs012;" + (certChainIndex+1);
certChainIndex++;
}
addSelectOption("Frm_CertID", CertList[i], CertName);
}
jslSetValue("Frm_CertID", "CertID");
jslEnDisplay("tr_cert_chain");
}
}
function pageSetValue()
{
if ( true == isParaNeedSet("TR_DefaultWan") )
{
jslSetValue("DefaultWan", "Frm_DefaultWan");
}
jslSetValue("URL", "Frm_URL");
jslSetValue("UserName", "Frm_UserName");
jslSetValue("UserPassword", "Frm_UserPassword", "SET");
jslSetValue("ConnectionRequestUsername", "Frm_ConnectionRequestUsername");
jslSetValue("ConnectionRequestPassword", "Frm_ConnectionRequestPassword", "SET");
if ( true == isParaNeedSet("TR_ConnectionRequestPort") )
{
jslSetValue("ConnectionRequestPort", "Frm_ConnectionRequestPort");
}
jslViewToPostCheckBox("PeriodicInformEnable", "Frm_PeriodicInformEnable");
jslSetValue("PeriodicInformInterval", "Frm_PeriodicInformInterval");
jslViewToPostCheckBox("SupportCertAuth", "Frm_SupportCertAuth");
var CertList = getValue("CertList");
if ( "" != CertList )
{
jslSetValue("CertID", "Frm_CertID");
}
}
function pageCheckValue()
{
var msg = "";
if(false == PageResetValueRmZero("Frm_PeriodicInformInterval","Fnt_PeriodicInformInterval"))
{
return  false;
}
if(false == checkTR069URL("Frm_URL", "Fnt_URL", 1, 1, 256))
{
return  false;
}
if(false == checkName("Frm_UserName", "Fnt_UserName", 1, 1, 256))
{
return  false;
}
if(false == checkName("Frm_UserPassword", "Fnt_UserPassword", 0, 0, 256))
{
return  false;
}
if(false == checkName("Frm_ConnectionRequestUsername", "Fnt_ConnectionRequestUsername", 0, 0, 256))
{
return  false;
}
if(false == checkName("Frm_ConnectionRequestPassword", "Fnt_ConnectionRequestPassword", 0, 0, 256))
{
return  false;
}
if(false == checkNum("Frm_PeriodicInformInterval", "Fnt_PeriodicInformInterval", 1, 1, 42949672))
{
return  false;
}
if( true == isParaNeedSet("TR_ConnectionRequestPort")
&& false == checkNum("Frm_ConnectionRequestPort", "Fnt_ConnectionRequestPort", 1, 1025, 65534))
{
return  false;
}
return  true;
}
function PageResetValueRmZero(frm_id, fnt_id)
{
if( false == ReSetValueRmZero(frm_id) )
{
var msg = getmsg(144);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
return true;
}
function checkTR069URL(frm_id, fnt_id, isNull, minLength, maxLength)
{
var msg ="";
if(0 == isNull && false == checkNull(getValue(frm_id)))
{
return  true;
}
var url = getValue(frm_id);
var urlCheck = checkURL(url);
if("-1" == urlCheck)
{
msg = getmsg(101);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if("-3" == urlCheck)
{
msg = getmsg(102, minLength, maxLength);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if(false == urlCheck)
{
msg = getmsg(105);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if(url.match("^(http:\/\/)|(https:\/\/)") == null)
{
msg = getmsg(143);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else
{
}
return  true;
}
function checkName(frm_id, fnt_id, isNull, minLength, maxLength)
{
var msg = "";
if( 0 == isNull && false == checkNull(getValue(frm_id)) )
{
return  true;
}
var  nameCheck = checkStrLengthRange(getValue(frm_id), minLength, maxLength);
if("-1" == nameCheck)
{
msg = getmsg(101);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if(false == checkGenStringForASC(getValue(frm_id)))
{
msg = getmsg(114);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if("-3" == nameCheck)
{
msg = getmsg(102, minLength, maxLength);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else
{
}
return true;
}
function checkNum(frm_id, fnt_id, isNull, minValue, maxValue)
{
var msg = "";
if( 0 == isNull && false == checkNull(getValue(frm_id)) )
{
return  true;
}
var numCheck = checkIntegerRange(getValue(frm_id), minValue, maxValue);
if("-1" == numCheck)
{
msg = getmsg(101);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
if("-2" == numCheck)
{
msg = getmsg(115);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else if("-3" == numCheck)
{
msg = getmsg(116, minValue, maxValue);
ShowErrorForCom(frm_id, fnt_id, msg);
return false;
}
else
{
}
return  true;
}
function pageCancel()
{
DisableALL();
getObj("fSubmit").submit();
}
function pageSubmit()
{
if(true == pageCheckValue())
{
HiddenParaInit(TR069_PARA);
pageSetValue();
setValue("IF_ACTION", "apply");
DisableALL();
getObj("fSubmit").submit();
}
else
{
}
}
function Enable_Reported()
{
if(true == getChecked("Frm_PeriodicInformEnable"))
{
jslEnable("Frm_PeriodicInformInterval");
}
else
{
jslSetValue("Frm_PeriodicInformInterval", "PeriodicInformInterval");
jslDisable("Frm_PeriodicInformInterval");
}
}
</script>